

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Section: Boundary conditions &mdash; AMR-Wind 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=7ab3649f" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2709fde1"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Section: MLMG options" href="inputs_MLMG.html" />
    <link rel="prev" title="Section: SyntheticTurbulence" href="inputs_SyntheticTurbulence.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AMR-Wind
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../walkthrough/index.html">Walkthrough</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="user.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="features.html">Capabilities and Roadmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="build.html">Compiling AMR-Wind</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="inputs.html">AMR-Wind inputs file</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="inputs.html#input-file-reference">Input file reference</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="inputs_geometry.html">Section: geometry</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_amr.html">Section: amr</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_tagging.html">Section: tagging</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_time.html">Section: time</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_io.html">Section: io</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_incflo.html">Section: incflo</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_transport.html">Section: transport</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_turbulence.html">Section: turbulence</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_Momentum_Sources.html">Section: Momentum Sources</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_ABL.html">Section: ABL</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_ABL_meso_forcing.html">Section: ABLMesoForcing</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_SyntheticTurbulence.html">Section: SyntheticTurbulence</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Section: Boundary conditions</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_MLMG.html">Section: MLMG options</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_Sampling.html">Section: Sampling</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_Averaging.html">Section: Averaging</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_KineticEnergy.html">Section: KineticEnergy</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_Enstrophy.html">Section: Enstrophy</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_Actuator.html">Section: Actuator</a></li>
<li class="toctree-l4"><a class="reference internal" href="inputs_ocean_waves.html">Section: Ocean Waves</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="abl_bndry_io.html">AMR-Wind ABL Boundary I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="run.html">Running AMR-Wind</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_processing_examples.html">Post-processing Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theory/theory.html">Theory Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer/index.html">Developer Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AMR-Wind</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="user.html">User Manual</a></li>
          <li class="breadcrumb-item"><a href="inputs.html">AMR-Wind inputs file</a></li>
      <li class="breadcrumb-item active">Section: Boundary conditions</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user/inputs_Boundary_conditions.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="section-boundary-conditions">
<span id="inputs-boundary-conditions"></span><h1>Section: Boundary conditions<a class="headerlink" href="#section-boundary-conditions" title="Link to this heading"></a></h1>
<p>This section controls the boundary conditions. Only non-periodic BC’s need to be defined here.</p>
<dl class="std input_param">
<dt class="sig sig-object std" id="input_param-xlo.type-or-ylo.type-zlo.type-xhi.type-yhi.type-zhi.type">
<span class="sig-name descname"><span class="pre">xlo.type</span> <span class="pre">(or</span> <span class="pre">ylo.type,</span> <span class="pre">zlo.type,</span> <span class="pre">xhi.type,</span> <span class="pre">yhi.type,</span> <span class="pre">zhi.type)</span></span><a class="headerlink" href="#input_param-xlo.type-or-ylo.type-zlo.type-xhi.type-yhi.type-zhi.type" title="Link to this definition"></a></dt>
<dd><p><strong>type:</strong> String, mandatory if non-periodic</p>
<p>Boundary condition type on the lo (or hi) side of the domain.
Current options are: periodic, pressure_inflow, pressure_outflow, mass_inflow,
mass_inflow_outflow, no_slip_wall, slip_wall, symmetric_wall and wall_model.</p>
</dd></dl>

<dl class="std input_param">
<dt class="sig sig-object std" id="input_param-xlo.temperature-or-ylo.temperature-etc">
<span class="sig-name descname"><span class="pre">xlo.temperature</span> <span class="pre">(or</span> <span class="pre">ylo.temperature,</span> <span class="pre">etc)</span></span><a class="headerlink" href="#input_param-xlo.temperature-or-ylo.temperature-etc" title="Link to this definition"></a></dt>
<dd><p><strong>type:</strong> Real, optional, default = 0.0</p>
<p>Specifies a temperature gradient at the wall, only activated for slip_wall and wall_model BC types.</p>
</dd></dl>

<section id="mass-inflow-boundary-conditions">
<h2>Mass inflow boundary conditions<a class="headerlink" href="#mass-inflow-boundary-conditions" title="Link to this heading"></a></h2>
<p>For the mass_inflow boundary condition type, the user can specify constant values in the input file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xlo</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mass_inflow&quot;</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">0.0</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">temperature</span> <span class="o">=</span> <span class="mf">300.0</span>
</pre></div>
</div>
<p>In addition to being able to specify constant values, the user has access to a variety of included complex boundary conditions (e.g., LinearProfile, PowerLawProfile, Rankine) that are activated in the input file. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xlo</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mass_inflow&quot;</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">density</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">velocity</span> <span class="o">=</span> <span class="mf">5.0</span> <span class="mf">5.0</span> <span class="mf">0.0</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">inflow_type</span> <span class="o">=</span> <span class="n">LinearProfile</span>
</pre></div>
</div>
<p>If the user wants to define their own boundary conditions, this is done by editing <cite>CustomScalar</cite> and <cite>CustomVelocity</cite> source and header files in the <cite>udfs</cite> folder. <cite>CustomScalar</cite> is used for scalar fields and <cite>CustomVelocity</cite> is used for velocity fields. These can then be activated in the input file as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xlo</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mass_inflow&quot;</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">temperature</span><span class="o">.</span><span class="n">inflow_type</span> <span class="o">=</span> <span class="n">CustomScalar</span>
<span class="n">CustomScalar</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">inflow_type</span> <span class="o">=</span> <span class="n">CustomVelocity</span>
<span class="n">CustomVelocity</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="mf">1.0</span>
</pre></div>
</div>
<p>They do not both need to be defined at the same time. It is the user’s responsibility to ensure that the source files are appropriately edited for their use case. Examples of how these files can be edited are found through comparison of the other mass_inflow functions in the <cite>udfs</cite> folder.</p>
</section>
<section id="mass-inflow-outflow-boundary-conditions">
<h2>Mass inflow-outflow boundary conditions<a class="headerlink" href="#mass-inflow-outflow-boundary-conditions" title="Link to this heading"></a></h2>
<p>The mass_inflow_outflow boundary condition is designed to handle both inflow and outflow at the same boundary.
For the advection schemes, it implements a Neumann type behavior at the outflow cells and a Dirichlet behavior at the inflow cells.
It uses Neumann conditions for the MAC and nodal projections and
enforces solvability before the projections
by correcting the outflow to match with the inflow within the specified mass_inflow_outflow boundaries.
It uses a Dirichlet condition for the diffusion solver.</p>
<p>Both the approaches mentioned above for the mass inflow condition,
constant values and UDFs, can be used to specify the boundary values.
The outflow values will be automatically replaced by a value from the interior cell
to enforce the Neumann type behavior.
See the <code class="docutils literal notranslate"><span class="pre">freestream_godunov_inout</span></code> test for an example that uses the TwoLayer UDF.
This test involves two z-layers of the flow along opposite x-directions.
The input file options are copied here:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">geometry</span><span class="o">.</span><span class="n">is_periodic</span>  <span class="o">=</span>  <span class="mi">0</span>   <span class="mi">1</span>   <span class="mi">0</span>   <span class="c1"># Periodic in y</span>

<span class="c1"># Boundary conditions</span>
<span class="n">TwoLayer</span><span class="o">.</span><span class="n">bottom_vel</span>   <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
<span class="n">TwoLayer</span><span class="o">.</span><span class="n">top_vel</span>      <span class="o">=</span>  <span class="mf">1.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
<span class="n">TwoLayer</span><span class="o">.</span><span class="n">init_perturb</span> <span class="o">=</span> <span class="mf">0.9</span>
<span class="n">TwoLayer</span><span class="o">.</span><span class="n">z_partition</span>  <span class="o">=</span> <span class="mf">0.5</span>

<span class="n">xlo</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mass_inflow_outflow&quot;</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">density</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">xlo</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">inflow_outflow_type</span> <span class="o">=</span> <span class="n">TwoLayer</span>

<span class="n">xhi</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;mass_inflow_outflow&quot;</span>
<span class="n">xhi</span><span class="o">.</span><span class="n">density</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">xhi</span><span class="o">.</span><span class="n">velocity</span><span class="o">.</span><span class="n">inflow_outflow_type</span> <span class="o">=</span> <span class="n">TwoLayer</span>

<span class="n">zlo</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;slip_wall&quot;</span>
<span class="n">zhi</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s2">&quot;slip_wall&quot;</span>
</pre></div>
</div>
<p>The most applicable use case for this boundary condition is with the
<a class="reference internal" href="abl_bndry_io.html#amrwind-abl-bndry-io"><span class="std std-ref">AMR-Wind ABL Boundary I/O</span></a> for flows that change directions
across the vertical coordinate or with time.
The work to integrate this condition with the ABL class is under progress.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="inputs_SyntheticTurbulence.html" class="btn btn-neutral float-left" title="Section: SyntheticTurbulence" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="inputs_MLMG.html" class="btn btn-neutral float-right" title="Section: MLMG options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>